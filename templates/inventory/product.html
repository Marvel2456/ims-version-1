{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}

<br><br><br>
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <b><li {% if message.tags %} class="{{ message.tags }}"{% endif %} style="background-color: #80ceeb; color:black; text-align:center; list-style: none; box-shadow:12px 12px 12px #1cc8e6">{{ message }}</li></b>
                    {% endfor %}
                </ul>
            {% endif %}
            <a href="{% url 'add_product' %}" class="btn btn-success">Add New</a>&nbsp;&nbsp;<a href="{% url 'csv_upload' %}" class="btn btn-primary">Upload</a>
        </div>
            <br><br>
            <div class="col-sm-6">
            <form method="POST">
                {% csrf_token %}
                
                {{form|crispy}}
        
                <input type="submit" value='Search' class="btn btn-primary" style="border-radius: 5px;"/>
            </form>
            <br><br>
            </div>
            <table class="table table-hover">
                <thead class="thead-white">
                        <tr>
                            <th scope="col-sm-12">id</th>
                            <th scope="col-sm-12">Products</th>
                            <th scope="col-sm-12">Quantity</th>
                            <th scope="col-sm-12"></th>
                        </tr>
                    </thead>
                    
                    {% for product in product %} 
                    <tbody>
                        <tr>
                            <td>{{forloop.counter}}</td>
                            <td><a href="{%  url 'product_details' product.id %}">{{product.Item_name}}</a></td>
                            <td>
                                {% if product.quantity < product.reorder_level %}
                                <div style="background-color:red ;" class="btn ">&nbsp;&nbsp;&nbsp;&nbsp;{{ product.quantity }}&nbsp;&nbsp;&nbsp;&nbsp;</div>
                                {% elif product.quantity == product.reorder_level %}
                                <div style="background-color:orange ;" class="btn ">&nbsp;&nbsp;&nbsp;&nbsp;{{ product.quantity }}&nbsp;&nbsp;&nbsp;&nbsp;</div>
                                {% else %}
                                {{ product.quantity }}
                                {% endif %}
                            </td>
                            <td><a href="{%  url 'update_product' product.id %}" class="btn btn-success btn-rounded">Edit</a>&nbsp;&nbsp;<a href="{%  url 'delete_product' product.id %}" class="btn btn-danger btn-rounded"><i class="fas fa-trash" aria-hidden="true"></i></a></td>
                        </tr>
                    </tbody>
                    {% endfor %}
            </table>
        </div>
    </div>
</div>
<br><br>
{% endblock %}